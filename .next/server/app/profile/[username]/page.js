(()=>{var e={};e.id=6381,e.ids=[6381],e.modules={1744:(e,s,r)=>{Promise.resolve().then(r.bind(r,73892))},3295:e=>{"use strict";e.exports=require("next/dist/server/app-render/after-task-async-storage.external.js")},5009:(e,s,r)=>{"use strict";r.r(s),r.d(s,{GlobalError:()=>a.a,__next_app__:()=>u,pages:()=>d,routeModule:()=>x,tree:()=>c});var t=r(65239),l=r(48088),o=r(88170),a=r.n(o),i=r(30893),n={};for(let e in i)0>["default","tree","pages","GlobalError","__next_app__","routeModule"].indexOf(e)&&(n[e]=()=>i[e]);r.d(s,n);let c={children:["",{children:["profile",{children:["[username]",{children:["__PAGE__",{},{page:[()=>Promise.resolve().then(r.bind(r,66001)),"C:\\Users\\kevin\\Downloads\\Clone-https___www.tiktok.com_\\temp_unzip\\tiktok-clone\\src\\app\\profile\\[username]\\page.tsx"]}]},{}]},{}]},{layout:[()=>Promise.resolve().then(r.bind(r,94431)),"C:\\Users\\kevin\\Downloads\\Clone-https___www.tiktok.com_\\temp_unzip\\tiktok-clone\\src\\app\\layout.tsx"],"not-found":[()=>Promise.resolve().then(r.t.bind(r,57398,23)),"next/dist/client/components/not-found-error"],forbidden:[()=>Promise.resolve().then(r.t.bind(r,89999,23)),"next/dist/client/components/forbidden-error"],unauthorized:[()=>Promise.resolve().then(r.t.bind(r,65284,23)),"next/dist/client/components/unauthorized-error"]}]}.children,d=["C:\\Users\\kevin\\Downloads\\Clone-https___www.tiktok.com_\\temp_unzip\\tiktok-clone\\src\\app\\profile\\[username]\\page.tsx"],u={require:r,loadChunk:()=>Promise.resolve()},x=new t.AppPageRouteModule({definition:{kind:l.RouteKind.APP_PAGE,page:"/profile/[username]/page",pathname:"/profile/[username]",bundlePath:"",filename:"",appPaths:[]},userland:{loaderTree:c}})},10846:e=>{"use strict";e.exports=require("next/dist/compiled/next-server/app-page.runtime.prod.js")},11997:e=>{"use strict";e.exports=require("punycode")},19121:e=>{"use strict";e.exports=require("next/dist/server/app-render/action-async-storage.external.js")},27910:e=>{"use strict";e.exports=require("stream")},29294:e=>{"use strict";e.exports=require("next/dist/server/app-render/work-async-storage.external.js")},33873:e=>{"use strict";e.exports=require("path")},34631:e=>{"use strict";e.exports=require("tls")},55511:e=>{"use strict";e.exports=require("crypto")},55591:e=>{"use strict";e.exports=require("https")},63033:e=>{"use strict";e.exports=require("next/dist/server/app-render/work-unit-async-storage.external.js")},66001:(e,s,r)=>{"use strict";r.r(s),r.d(s,{default:()=>t});let t=(0,r(12907).registerClientReference)(function(){throw Error("Attempted to call the default export of \"C:\\\\Users\\\\kevin\\\\Downloads\\\\Clone-https___www.tiktok.com_\\\\temp_unzip\\\\tiktok-clone\\\\src\\\\app\\\\profile\\\\[username]\\\\page.tsx\" from the server, but it's on the client. It's not possible to invoke a client function from the server, it can only be rendered as a Component or passed to props of a Client Component.")},"C:\\Users\\kevin\\Downloads\\Clone-https___www.tiktok.com_\\temp_unzip\\tiktok-clone\\src\\app\\profile\\[username]\\page.tsx","default")},73892:(e,s,r)=>{"use strict";r.r(s),r.d(s,{default:()=>q});var t=r(60687),l=r(43210),o=r(16189),a=r(30474),i=r(163),n=r(18780),c=r(66464),d=r(30362),u=r(32584),x=r(29523),m=r(85763),p=r(91821),h=r(60516),f=r(56268),w=r(72542),j=r(11516),v=r(82614);let y=(0,v.A)("UserCheck",[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["polyline",{points:"16 11 18 13 22 9",key:"1pwet4"}]]),_=(0,v.A)("UserPlus",[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["line",{x1:"19",x2:"19",y1:"8",y2:"14",key:"1bvyxn"}],["line",{x1:"22",x2:"16",y1:"11",y2:"11",key:"1shjgl"}]]),g=(0,v.A)("Mail",[["rect",{width:"20",height:"16",x:"2",y:"4",rx:"2",key:"18n3k1"}],["path",{d:"m22 7-8.97 5.7a1.94 1.94 0 0 1-2.06 0L2 7",key:"1ocrg3"}]]);var k=r(69795),N=r(26622),b=r(36644),C=r(37590);function q(){let e=(0,o.useRouter)(),{username:s}=(0,o.useParams)(),[r,v]=(0,l.useState)(null),{user:q}=(0,l.useContext)(n.cy),[P,A]=(0,l.useState)(!0),[M,U]=(0,l.useState)(null),[E,S]=(0,l.useState)("content"),[F,L]=(0,l.useState)(!1),[R,z]=(0,l.useState)(!1),[$,D]=(0,l.useState)(!0);(0,l.useCallback)(async()=>{if(!q||!r||q.id===r.id)return L(!1),D(!1),!1;D(!0);try{let{error:e,count:s}=await c.N.from("relationships").select("*",{count:"exact",head:!0}).eq("follower_uid",q.id).eq("followed_uid",r.id);if(e)throw e;let t=(s??0)>0;return L(t),t}catch(e){return e instanceof Error?e.message:String(e),console.error("Error checking follow status:",e),C.oR.error("Could not verify follow status."),L(!1),!1}finally{D(!1)}},[q,r]);let G=async()=>{if(!q||!r||q.id===r.id)return void C.oR.error("Cannot follow/unfollow.");z(!0);try{if(F){let{error:e}=await c.N.from("relationships").delete().match({follower_uid:q.id,followed_uid:r.id});if(e)throw e;C.oR.success(`Unfollowed @${r.username}`),L(!1),v(e=>e?{...e,followers_count:Math.max(0,(e.followers_count??0)-1)}:null)}else{let{error:e}=await c.N.from("relationships").insert({follower_uid:q.id,followed_uid:r.id});if(e)throw e;C.oR.success(`Followed @${r.username}`),L(!0),v(e=>e?{...e,followers_count:(e.followers_count??0)+1}:null)}}catch(s){let e=s instanceof Error?s.message:String(s);console.error("Error toggling follow (Full Error):",s),C.oR.error(`Failed to ${F?"unfollow":"follow"}: ${e}`),L(F)}finally{z(!1)}};return P?(0,t.jsx)(d.MainLayout,{children:(0,t.jsx)("div",{className:"flex justify-center items-center min-h-[70vh]",children:(0,t.jsxs)("div",{className:"flex flex-col items-center",children:[(0,t.jsx)(j.A,{className:"h-12 w-12 animate-spin text-primary"}),(0,t.jsx)("p",{className:"mt-4 text-muted-foreground",children:"Loading profile..."})]})})}):M?(0,t.jsx)(d.MainLayout,{children:(0,t.jsx)("div",{className:"container max-w-3xl mx-auto px-4 py-12",children:(0,t.jsxs)(p.Fc,{variant:"destructive",children:[(0,t.jsx)(p.XL,{children:"Error"}),(0,t.jsx)(p.TN,{children:M})]})})}):r?(0,t.jsxs)(d.MainLayout,{children:[(0,t.jsxs)(i.P.div,{className:"relative w-full h-48 md:h-64 overflow-hidden bg-gradient-to-r from-slate-300 to-slate-400 dark:from-slate-700 dark:to-slate-800",initial:{opacity:0},animate:{opacity:1},transition:{duration:.6},children:[r.banner_image_url&&(0,t.jsx)(a.default,{src:r.banner_image_url,alt:"Profile banner",className:"object-cover object-center",fill:!0,priority:!0,quality:90}),(0,t.jsx)("div",{className:"absolute inset-0 bg-gradient-to-t from-black/50 to-transparent"})]}),(0,t.jsxs)("div",{className:"container max-w-3xl mx-auto px-4",children:[(0,t.jsxs)(i.P.div,{className:"relative -mt-16 md:-mt-20 flex flex-col md:flex-row gap-6 md:gap-8 mb-8",initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.5,delay:.2},children:[(0,t.jsx)("div",{className:"relative flex-shrink-0",children:(0,t.jsxs)(u.eu,{className:"h-32 w-32 md:h-36 md:w-36 border-4 border-background shadow-lg",children:[(0,t.jsx)(u.BK,{src:r.profile_picture_url??void 0,alt:r.username??"User"}),(0,t.jsx)(u.q5,{className:"text-3xl",children:r.name?.charAt(0)?.toUpperCase()??r.username?.charAt(0)?.toUpperCase()??"U"})]})}),(0,t.jsxs)("div",{className:"flex-1 space-y-3 pt-4 md:pt-6",children:[(0,t.jsxs)("div",{className:"flex flex-col md:flex-row md:items-center md:justify-between gap-4",children:[(0,t.jsxs)("div",{children:[(0,t.jsx)("h1",{className:"text-2xl font-bold",children:r.name??"User Name"}),(0,t.jsxs)("h2",{className:"text-lg text-muted-foreground",children:["@",r.username??"username"]})]}),q&&r&&q.id!==r.id&&(0,t.jsxs)("div",{className:"flex flex-wrap gap-2",children:[(0,t.jsxs)(x.$,{variant:F?"secondary":"default",onClick:G,disabled:R||$,children:[R?(0,t.jsx)(j.A,{className:"h-4 w-4 mr-2 animate-spin"}):F?(0,t.jsx)(y,{className:"h-4 w-4 mr-2"}):(0,t.jsx)(_,{className:"h-4 w-4 mr-2"}),R?"Processing...":F?"Followed":"Follow"]}),(0,t.jsxs)(x.$,{variant:"outline",onClick:()=>{if(!q||!r||q.id===r.id)return void C.oR.error("Cannot message this user.");e.push(`/messages?userId=${r.id}`)},children:[(0,t.jsx)(g,{className:"h-4 w-4 mr-2"})," Message"]}),(0,t.jsx)(x.$,{variant:"ghost",size:"icon",children:(0,t.jsx)(k.A,{className:"h-5 w-5"})})]})]}),r.bio&&(0,t.jsx)("p",{className:"max-w-3xl text-sm md:text-base mr-2",children:r.bio}),(0,t.jsx)("div",{className:"flex flex-wrap gap-x-4 gap-y-1 text-sm text-muted-foreground",children:r.created_at&&(0,t.jsxs)("div",{className:"flex items-center",children:[(0,t.jsx)(N.A,{className:"h-4 w-4 mr-1"})," Joined ",(0,w.GP)(new Date(r.created_at),"MMMM yyyy")]})}),(0,t.jsxs)("div",{className:"flex gap-6 pt-2",children:[(0,t.jsxs)("div",{className:"flex flex-col",children:[(0,t.jsx)("span",{className:"font-bold",children:r.following_count?.toLocaleString()??"0"}),(0,t.jsx)("span",{className:"text-sm text-muted-foreground",children:"Following"})]}),(0,t.jsxs)("div",{className:"flex flex-col",children:[(0,t.jsx)("span",{className:"font-bold",children:r.followers_count?.toLocaleString()??"0"}),(0,t.jsx)("span",{className:"text-sm text-muted-foreground",children:"Followers"})]})]})]})]}),(0,t.jsx)("div",{className:"mb-16",children:(0,t.jsxs)(m.tU,{value:E,onValueChange:e=>{S(e)},className:"w-full",children:[(0,t.jsx)("div",{className:"border-b",children:(0,t.jsxs)(m.j7,{className:"justify-start h-12",children:[(0,t.jsxs)(m.Xi,{value:"content",className:"flex items-center",children:[(0,t.jsx)(b.A,{className:"h-4 w-4 mr-2"})," Content"]}),(0,t.jsxs)(m.Xi,{value:"home",className:"flex items-center",children:[(0,t.jsx)(b.A,{className:"h-4 w-4 mr-2"})," Home"]})]})}),(0,t.jsx)(m.av,{value:"content",children:(0,t.jsx)(h.Y,{userId:r.id,allowDeletion:!1})}),(0,t.jsx)(m.av,{value:"home",children:(0,t.jsx)(f.A,{})})]})})]})]}):(0,t.jsx)(d.MainLayout,{children:(0,t.jsx)("div",{className:"container max-w-3xl mx-auto px-4 py-12",children:(0,t.jsxs)(p.Fc,{children:[(0,t.jsx)(p.XL,{children:"Profile Not Found"}),(0,t.jsxs)(p.TN,{children:["The profile for @",s," could not be loaded."]})]})})})}},74075:e=>{"use strict";e.exports=require("zlib")},79428:e=>{"use strict";e.exports=require("buffer")},79551:e=>{"use strict";e.exports=require("url")},81630:e=>{"use strict";e.exports=require("http")},91645:e=>{"use strict";e.exports=require("net")},92016:(e,s,r)=>{Promise.resolve().then(r.bind(r,66001))},94735:e=>{"use strict";e.exports=require("events")}};var s=require("../../../webpack-runtime.js");s.C(e);var r=e=>s(s.s=e),t=s.X(0,[4447,353,2733,5597,2321,1137,9510,1289,9494,2948,3023,9509,362,6584],()=>r(5009));module.exports=t})();