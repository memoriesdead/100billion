(()=>{var e={};e.id=4029,e.ids=[4029],e.modules={3295:e=>{"use strict";e.exports=require("next/dist/server/app-render/after-task-async-storage.external.js")},3806:(e,r,t)=>{Promise.resolve().then(t.bind(t,99124))},6189:(e,r,t)=>{"use strict";t.r(r),t.d(r,{default:()=>s});let s=(0,t(12907).registerClientReference)(function(){throw Error("Attempted to call the default export of \"C:\\\\Users\\\\kevin\\\\Downloads\\\\Clone-https___www.tiktok.com_\\\\temp_unzip\\\\tiktok-clone\\\\src\\\\app\\\\profile\\\\edit\\\\page.tsx\" from the server, but it's on the client. It's not possible to invoke a client function from the server, it can only be rendered as a Component or passed to props of a Client Component.")},"C:\\Users\\kevin\\Downloads\\Clone-https___www.tiktok.com_\\temp_unzip\\tiktok-clone\\src\\app\\profile\\edit\\page.tsx","default")},8534:(e,r,t)=>{Promise.resolve().then(t.bind(t,6189))},10846:e=>{"use strict";e.exports=require("next/dist/compiled/next-server/app-page.runtime.prod.js")},11997:e=>{"use strict";e.exports=require("punycode")},19121:e=>{"use strict";e.exports=require("next/dist/server/app-render/action-async-storage.external.js")},27910:e=>{"use strict";e.exports=require("stream")},29294:e=>{"use strict";e.exports=require("next/dist/server/app-render/work-async-storage.external.js")},33873:e=>{"use strict";e.exports=require("path")},34631:e=>{"use strict";e.exports=require("tls")},34729:(e,r,t)=>{"use strict";t.d(r,{T:()=>n});var s=t(60687),i=t(43210),a=t(4780);let n=i.forwardRef(({className:e,...r},t)=>(0,s.jsx)("textarea",{className:(0,a.cn)("flex min-h-[60px] w-full rounded-md border border-input bg-transparent px-3 py-2 text-base shadow-sm placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-1 focus-visible:ring-ring disabled:cursor-not-allowed disabled:opacity-50 md:text-sm",e),ref:t,...r}));n.displayName="Textarea"},44493:(e,r,t)=>{"use strict";t.d(r,{BT:()=>d,Wu:()=>c,ZB:()=>l,Zp:()=>n,aR:()=>o,wL:()=>u});var s=t(60687),i=t(43210),a=t(4780);let n=i.forwardRef(({className:e,...r},t)=>(0,s.jsx)("div",{ref:t,className:(0,a.cn)("rounded-xl border bg-card text-card-foreground shadow",e),...r}));n.displayName="Card";let o=i.forwardRef(({className:e,...r},t)=>(0,s.jsx)("div",{ref:t,className:(0,a.cn)("flex flex-col space-y-1.5 p-6",e),...r}));o.displayName="CardHeader";let l=i.forwardRef(({className:e,...r},t)=>(0,s.jsx)("div",{ref:t,className:(0,a.cn)("font-semibold leading-none tracking-tight",e),...r}));l.displayName="CardTitle";let d=i.forwardRef(({className:e,...r},t)=>(0,s.jsx)("div",{ref:t,className:(0,a.cn)("text-sm text-muted-foreground",e),...r}));d.displayName="CardDescription";let c=i.forwardRef(({className:e,...r},t)=>(0,s.jsx)("div",{ref:t,className:(0,a.cn)("p-6 pt-0",e),...r}));c.displayName="CardContent";let u=i.forwardRef(({className:e,...r},t)=>(0,s.jsx)("div",{ref:t,className:(0,a.cn)("flex items-center p-6 pt-0",e),...r}));u.displayName="CardFooter"},55511:e=>{"use strict";e.exports=require("crypto")},55591:e=>{"use strict";e.exports=require("https")},63033:e=>{"use strict";e.exports=require("next/dist/server/app-render/work-unit-async-storage.external.js")},74075:e=>{"use strict";e.exports=require("zlib")},79428:e=>{"use strict";e.exports=require("buffer")},79551:e=>{"use strict";e.exports=require("url")},81630:e=>{"use strict";e.exports=require("http")},91645:e=>{"use strict";e.exports=require("net")},91821:(e,r,t)=>{"use strict";t.d(r,{Fc:()=>l,TN:()=>c,XL:()=>d});var s=t(60687),i=t(43210),a=t(24224),n=t(4780);let o=(0,a.F)("relative w-full rounded-lg border px-4 py-3 text-sm [&>svg+div]:translate-y-[-3px] [&>svg]:absolute [&>svg]:left-4 [&>svg]:top-4 [&>svg]:text-foreground [&>svg~*]:pl-7",{variants:{variant:{default:"bg-background text-foreground",destructive:"border-destructive/50 text-destructive dark:border-destructive [&>svg]:text-destructive"}},defaultVariants:{variant:"default"}}),l=i.forwardRef(({className:e,variant:r,...t},i)=>(0,s.jsx)("div",{ref:i,role:"alert",className:(0,n.cn)(o({variant:r}),e),...t}));l.displayName="Alert";let d=i.forwardRef(({className:e,...r},t)=>(0,s.jsx)("h5",{ref:t,className:(0,n.cn)("mb-1 font-medium leading-none tracking-tight",e),...r}));d.displayName="AlertTitle";let c=i.forwardRef(({className:e,...r},t)=>(0,s.jsx)("div",{ref:t,className:(0,n.cn)("text-sm [&_p]:leading-relaxed",e),...r}));c.displayName="AlertDescription"},94735:e=>{"use strict";e.exports=require("events")},97049:(e,r,t)=>{"use strict";t.r(r),t.d(r,{GlobalError:()=>n.a,__next_app__:()=>u,pages:()=>c,routeModule:()=>p,tree:()=>d});var s=t(65239),i=t(48088),a=t(88170),n=t.n(a),o=t(30893),l={};for(let e in o)0>["default","tree","pages","GlobalError","__next_app__","routeModule"].indexOf(e)&&(l[e]=()=>o[e]);t.d(r,l);let d={children:["",{children:["profile",{children:["edit",{children:["__PAGE__",{},{page:[()=>Promise.resolve().then(t.bind(t,6189)),"C:\\Users\\kevin\\Downloads\\Clone-https___www.tiktok.com_\\temp_unzip\\tiktok-clone\\src\\app\\profile\\edit\\page.tsx"]}]},{}]},{}]},{layout:[()=>Promise.resolve().then(t.bind(t,94431)),"C:\\Users\\kevin\\Downloads\\Clone-https___www.tiktok.com_\\temp_unzip\\tiktok-clone\\src\\app\\layout.tsx"],"not-found":[()=>Promise.resolve().then(t.t.bind(t,57398,23)),"next/dist/client/components/not-found-error"],forbidden:[()=>Promise.resolve().then(t.t.bind(t,89999,23)),"next/dist/client/components/forbidden-error"],unauthorized:[()=>Promise.resolve().then(t.t.bind(t,65284,23)),"next/dist/client/components/unauthorized-error"]}]}.children,c=["C:\\Users\\kevin\\Downloads\\Clone-https___www.tiktok.com_\\temp_unzip\\tiktok-clone\\src\\app\\profile\\edit\\page.tsx"],u={require:t,loadChunk:()=>Promise.resolve()},p=new s.AppPageRouteModule({definition:{kind:i.RouteKind.APP_PAGE,page:"/profile/edit/page",pathname:"/profile/edit",bundlePath:"",filename:"",appPaths:[]},userland:{loaderTree:d}})},99124:(e,r,t)=>{"use strict";t.r(r),t.d(r,{default:()=>w});var s=t(60687),i=t(43210),a=t(30362),n=t(29523),o=t(89667),l=t(80013),d=t(34729),c=t(44493);function u({initialProfileData:e,onSave:r,onCancel:t,isSaving:a}){let[u,p]=(0,i.useState)(""),[x,m]=(0,i.useState)(""),[f,h]=(0,i.useState)(""),[v,g]=(0,i.useState)("");return(0,s.jsxs)(c.Zp,{children:[(0,s.jsxs)(c.aR,{children:[(0,s.jsx)(c.ZB,{children:"Profile Details"}),(0,s.jsx)(c.BT,{children:"Update your name, username, and bio."})]}),(0,s.jsxs)("form",{onSubmit:e=>{e.preventDefault();let t=null;if(""!==v.trim()){let e=parseFloat(v);if(isNaN(e)||e<0)return void alert("Please enter a valid, non-negative subscription price or leave it blank for free content.");t=e}r({name:u.trim(),username:x.trim(),bio:f.trim(),subscription_price:t})},children:[(0,s.jsxs)(c.Wu,{className:"space-y-4",children:[(0,s.jsxs)("div",{className:"space-y-1.5",children:[(0,s.jsx)(l.J,{htmlFor:"name",children:"Name"}),(0,s.jsx)(o.p,{id:"name",value:u,onChange:e=>p(e.target.value),placeholder:"Your full name",disabled:a})]}),(0,s.jsxs)("div",{className:"space-y-1.5",children:[(0,s.jsx)(l.J,{htmlFor:"username",children:"Username"}),(0,s.jsx)(o.p,{id:"username",value:x,onChange:e=>m(e.target.value),placeholder:"Your unique username",disabled:a}),(0,s.jsx)("p",{className:"text-xs text-muted-foreground",children:"Usernames can only contain letters, numbers, underscores, and periods."})]}),(0,s.jsxs)("div",{className:"space-y-1.5",children:[(0,s.jsx)(l.J,{htmlFor:"bio",children:"Bio"}),(0,s.jsx)(d.T,{id:"bio",value:f,onChange:e=>h(e.target.value),placeholder:"Tell us a little about yourself",rows:4,maxLength:150,className:"resize-none",disabled:a}),(0,s.jsxs)("p",{className:"text-xs text-muted-foreground text-right",children:[f.length," / 150"]})]}),(0,s.jsxs)("div",{className:"space-y-1.5",children:[(0,s.jsx)(l.J,{htmlFor:"subscriptionPrice",children:"Monthly Subscription Price (USD)"}),(0,s.jsx)(o.p,{id:"subscriptionPrice",type:"number",step:"0.01",min:"0",value:v,onChange:e=>g(e.target.value),placeholder:"Leave blank for free",disabled:a,className:"w-1/2"}),(0,s.jsx)("p",{className:"text-xs text-muted-foreground",children:"Set a price for users to subscribe to your exclusive content. Leave blank if all your content is free."})]})]}),(0,s.jsxs)(c.wL,{className:"flex justify-end gap-2",children:[(0,s.jsx)(n.$,{type:"button",variant:"outline",onClick:t,disabled:a,children:"Cancel"}),(0,s.jsx)(n.$,{type:"submit",disabled:a,children:a?"Saving...":"Save Profile"})]})]})]})}var p=t(18780),x=t(91821),m=t(85814),f=t.n(m),h=t(35950),v=t(66464),g=t(8693),b=t(29494),j=t(54050),y=t(16189);function w(){let{user:e,loading:r}=(0,p.As)(),t=(0,g.jE)(),i=(0,y.useRouter)(),{data:o,isLoading:l,error:d}=(0,b.I)({queryKey:["editProfile",e?.id],queryFn:async()=>{if(!e?.id)return null;let{data:r,error:t}=await v.N.from("profiles").select("username, name, bio, subscription_price").eq("id",e.id).single();if(t&&"PGRST116"!==t.code)throw t;return r},enabled:!!e?.id&&!r}),c=(0,j.n)({mutationFn:async r=>{if(!e?.id)throw Error("User not authenticated");let{error:t}=await v.N.from("profiles").update({name:r.name,username:r.username,bio:r.bio,subscription_price:r.subscription_price,updated_at:new Date().toISOString()}).eq("id",e.id);if(t)throw t},onSuccess:()=>{t.invalidateQueries({queryKey:["profile",e?.id]}),t.invalidateQueries({queryKey:["editProfile",e?.id]}),i.push("/profile")},onError:e=>{console.error("Failed to update profile:",e)}});return r||l?(0,s.jsx)(a.MainLayout,{children:(0,s.jsxs)("div",{className:"flex justify-center items-center min-h-[70vh]",children:[(0,s.jsx)("p",{children:"Loading..."})," "]})}):e?(0,s.jsx)(a.MainLayout,{children:(0,s.jsxs)("div",{className:"container max-w-3xl mx-auto px-4 py-8 space-y-8",children:[(0,s.jsxs)("div",{children:[(0,s.jsx)("h1",{className:"text-2xl font-bold mb-2",children:"Edit Profile"}),(0,s.jsx)("p",{className:"text-muted-foreground",children:"Update your profile information and images."})]}),(0,s.jsx)(h.w,{}),d?(0,s.jsxs)(x.Fc,{variant:"destructive",children:[(0,s.jsx)(x.XL,{children:"Error Loading Profile Data"}),(0,s.jsx)(x.TN,{children:d.message})]}):o?(0,s.jsx)(u,{initialProfileData:o,onSave:e=>{c.mutate(e)},onCancel:()=>{i.push("/profile")},isSaving:c.isPending}):(0,s.jsx)("p",{children:"Could not load profile data to edit."})]})}):(0,s.jsx)(a.MainLayout,{children:(0,s.jsx)("div",{className:"container max-w-2xl mx-auto px-4 py-12",children:(0,s.jsxs)(x.Fc,{children:[(0,s.jsx)(x.XL,{children:"Authentication Required"}),(0,s.jsxs)(x.TN,{children:["You need to be logged in to edit your profile.",(0,s.jsx)(n.$,{variant:"link",className:"p-0 h-auto ml-2",asChild:!0,children:(0,s.jsx)(f(),{href:"/login",children:"Log In"})})]})]})})})}}};var r=require("../../../webpack-runtime.js");r.C(e);var t=e=>r(r.s=e),s=r.X(0,[4447,353,2733,5597,2321,1137,9494,3023,9509,362],()=>t(97049));module.exports=s})();