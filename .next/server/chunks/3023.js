exports.id=3023,exports.ids=[3023],exports.modules={4780:(e,t,r)=>{"use strict";r.d(t,{cn:()=>i});var s=r(49384),o=r(82348);function i(...e){return(0,o.QP)((0,s.$)(e))}},5687:(e,t,r)=>{Promise.resolve().then(r.t.bind(r,86346,23)),Promise.resolve().then(r.t.bind(r,27924,23)),Promise.resolve().then(r.t.bind(r,35656,23)),Promise.resolve().then(r.t.bind(r,40099,23)),Promise.resolve().then(r.t.bind(r,38243,23)),Promise.resolve().then(r.t.bind(r,28827,23)),Promise.resolve().then(r.t.bind(r,62763,23)),Promise.resolve().then(r.t.bind(r,97173,23))},13622:(e,t,r)=>{"use strict";r.d(t,{default:()=>s});let s=(0,r(12907).registerClientReference)(function(){throw Error("Attempted to call the default export of \"C:\\\\Users\\\\kevin\\\\Downloads\\\\Clone-https___www.tiktok.com_\\\\temp_unzip\\\\tiktok-clone\\\\src\\\\components\\\\Providers.tsx\" from the server, but it's on the client. It's not possible to invoke a client function from the server, it can only be rendered as a Component or passed to props of a Client Component.")},"C:\\Users\\kevin\\Downloads\\Clone-https___www.tiktok.com_\\temp_unzip\\tiktok-clone\\src\\components\\Providers.tsx","default")},17552:(e,t,r)=>{"use strict";r.d(t,{default:()=>l});var s=r(60687),o=r(43210),i=r(39091),n=r(8693),a=r(18780);function l({children:e}){let[t]=(0,o.useState)(()=>new i.E({defaultOptions:{queries:{}}}));return(0,s.jsx)(n.Ht,{client:t,children:(0,s.jsxs)(a.OJ,{children:[" ",e]})})}},18780:(e,t,r)=>{"use strict";r.d(t,{As:()=>l,OJ:()=>a,cy:()=>n});var s=r(60687),o=r(43210),i=r(66464);let n=(0,o.createContext)({user:null,session:null,loading:!0,signInWithGoogle:async()=>{console.warn("signInWithGoogle called before AuthProvider initialized")},signUpWithEmail:async()=>{console.warn("signUpWithEmail called before AuthProvider initialized")},signInWithEmail:async()=>{console.warn("signInWithEmail called before AuthProvider initialized")},sendPasswordReset:async()=>{console.warn("sendPasswordReset called before AuthProvider initialized")},signOut:async()=>{console.warn("signOut called before AuthProvider initialized")}}),a=({children:e})=>{let[t,r]=(0,o.useState)(null),[a,l]=(0,o.useState)(null),[c,d]=(0,o.useState)(!0);(0,o.useEffect)(()=>{(async()=>{try{let{data:{session:e},error:t}=await i.N.auth.getSession();if(t)throw t;l(e),r(e?.user??null)}catch(e){console.error("Error fetching initial Supabase session:",e)}finally{d(!1)}})();let{data:e}=i.N.auth.onAuthStateChange(async(e,t)=>{console.log("Supabase auth state changed:",e,t),l(t),r(t?.user??null)});return()=>{e?.subscription.unsubscribe()}},[]);let u=async()=>{d(!0);try{let{error:e}=await i.N.auth.signInWithOAuth({provider:"google"});if(e)throw e}catch(e){console.error("Error signing in with Google (Supabase):",e),d(!1)}},h=async(e,t)=>{d(!0);try{let{data:r,error:s}=await i.N.auth.signUp({email:e,password:t});if(s)throw s;r.user&&!r.user.email_confirmed_at&&console.log("Sign up successful. Please check your email for verification.")}catch(e){console.error("Error signing up (Supabase):",e),d(!1)}},f=async(e,t)=>{d(!0);try{let{error:r}=await i.N.auth.signInWithPassword({email:e,password:t});if(r)throw r}catch(e){console.error("Error signing in (Supabase):",e),d(!1)}},m=async e=>{try{let{error:t}=await i.N.auth.resetPasswordForEmail(e,{});if(t)throw t;console.log("Password reset email sent (Supabase).")}catch(e){console.error("Error sending password reset email (Supabase):",e)}},p=async()=>{try{let{error:e}=await i.N.auth.signOut();if(e)throw e;console.log("Supabase sign out successful.")}catch(e){console.error("Error signing out from Supabase:",e)}};return(0,s.jsx)(n.Provider,{value:{user:t,session:a,loading:c,signInWithGoogle:u,signUpWithEmail:h,signInWithEmail:f,sendPasswordReset:m,signOut:p},children:c?(0,s.jsx)("div",{children:"Loading Authentication..."}):e})},l=()=>(0,o.useContext)(n)},29523:(e,t,r)=>{"use strict";r.d(t,{$:()=>c});var s=r(60687),o=r(43210),i=r(8730),n=r(24224),a=r(4780);let l=(0,n.F)("inline-flex items-center justify-center gap-2 whitespace-nowrap rounded-md text-sm font-medium transition-colors focus-visible:outline-none focus-visible:ring-1 focus-visible:ring-ring disabled:pointer-events-none disabled:opacity-50 [&_svg]:pointer-events-none [&_svg]:size-4 [&_svg]:shrink-0",{variants:{variant:{default:"bg-primary text-primary-foreground shadow hover:bg-primary/90",destructive:"bg-destructive text-destructive-foreground shadow-sm hover:bg-destructive/90",outline:"border border-input bg-background shadow-sm hover:bg-accent hover:text-accent-foreground",secondary:"bg-secondary text-secondary-foreground shadow-sm hover:bg-secondary/80",ghost:"hover:bg-accent hover:text-accent-foreground",link:"text-primary underline-offset-4 hover:underline"},size:{default:"h-9 px-4 py-2",sm:"h-8 rounded-md px-3 text-xs",lg:"h-10 rounded-md px-8",icon:"h-9 w-9"}},defaultVariants:{variant:"default",size:"default"}}),c=o.forwardRef(({className:e,variant:t,size:r,asChild:o=!1,...n},c)=>{let d=o?i.DX:"button";return(0,s.jsx)(d,{className:(0,a.cn)(l({variant:t,size:r,className:e})),ref:c,...n})});c.displayName="Button"},31767:(e,t,r)=>{Promise.resolve().then(r.bind(r,52581)),Promise.resolve().then(r.bind(r,55962)),Promise.resolve().then(r.bind(r,17552))},32584:(e,t,r)=>{"use strict";r.d(t,{BK:()=>l,eu:()=>a,q5:()=>c});var s=r(60687),o=r(43210),i=r(11096),n=r(4780);let a=o.forwardRef(({className:e,...t},r)=>(0,s.jsx)(i.bL,{ref:r,className:(0,n.cn)("relative flex h-10 w-10 shrink-0 overflow-hidden rounded-full",e),...t}));a.displayName=i.bL.displayName;let l=o.forwardRef(({className:e,...t},r)=>(0,s.jsx)(i._V,{ref:r,className:(0,n.cn)("aspect-square h-full w-full",e),...t}));l.displayName=i._V.displayName;let c=o.forwardRef(({className:e,...t},r)=>(0,s.jsx)(i.H4,{ref:r,className:(0,n.cn)("flex h-full w-full items-center justify-center rounded-full bg-muted",e),...t}));c.displayName=i.H4.displayName},35692:()=>{},46569:(e,t,r)=>{"use strict";r.d(t,{M:()=>b});var s=r(60687),o=r(43210),i=r(85814),n=r.n(i),a=r(16189),l=r(66464),c=r(18780),d=r(32584),u=r(69587),h=r(85535),f=r(40532),m=r(52581);let p=(0,r(39010).c)(process.env.NEXT_PUBLIC_STRIPE_PUBLISHABLE_KEY);function b({postId:e,userId:t,username:r,profilePictureUrl:i,initialLikes:b,initialIsLiked:v,commentsCount:g,sharesCount:w,initialIsPrivate:x,isOwner:y,videoCaption:k,postType:P,is_for_sale:N,price:_,currency:E,onLikeSuccess:C}){(0,a.useRouter)();let{user:S}=(0,o.useContext)(c.cy),[j,A]=(0,o.useState)(v),[U,I]=(0,o.useState)(b),[$,z]=(0,o.useState)(x),[B,T]=(0,o.useState)(!1),[R,L]=(0,o.useState)(!1),O=(0,o.useCallback)(async()=>{if(!S)return void m.o.info("Please log in to like posts.");let t=!j,r=t?U+1:U-1;A(t),I(r);try{if(t){let{error:t}=await l.N.from("likes").insert({user_id:S.id,post_id:e});if(t)throw t}else{let{error:t}=await l.N.from("likes").delete().match({user_id:S.id,post_id:e});if(t)throw t}C?.(r)}catch(t){let e=t instanceof Error?t.message:String(t);A(j),I(U),m.o.error("Failed to update like status."),console.error("[InteractionButtons] Error updating like status:",e)}},[S,e,j,U,C]),W=(0,o.useCallback)(async()=>{let t={title:`Check out this post by @${r}!`,text:k||`Check out this post by @${r}!`,url:"video"===P?`${window.location.origin}/video/${e}`:`${window.location.origin}/image/${e}`};try{navigator.share?await navigator.share(t):(await navigator.clipboard.writeText(t.url),m.o.success("Link copied to clipboard!"))}catch(e){console.error("Error sharing:",e),"AbortError"!==e.name&&m.o.error("Could not share post.")}},[e,r,k,P]);return(0,o.useCallback)(async()=>{if(!y||B||!S){S||m.o.error("You must be logged in.");return}T(!0);let t=!$;z(t);try{let{error:r}=await l.N.from("posts").update({is_private:t}).eq("id",e).eq("user_id",S.id);if(r)throw r;m.o.success(`Post set to ${t?"Private":"Public"}`)}catch(t){let e=t instanceof Error?t.message:String(t);z($),m.o.error("Failed to update privacy status."),console.error("Error updating privacy status:",e)}finally{T(!1)}},[y,B,S,e,$]),(0,o.useCallback)(async()=>{if(!S)return void m.o.info("Please log in to purchase items.");if(!e||!N||!_||_<=0)return void m.o.error("This item cannot be purchased currently.");L(!0);try{let t=await fetch("/api/stripe/create-item-checkout-session",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({postId:e})}),r=await t.json();if(!t.ok)throw Error(r.error||"Failed to create checkout session");if(!r.sessionId)throw Error("Session ID not received from server");let s=await p;if(!s)throw Error("Stripe.js failed to load.");let{error:o}=await s.redirectToCheckout({sessionId:r.sessionId});if(o)throw Error(o.message)}catch(e){console.error("Purchase initiation error:",e),m.o.error(`Failed to initiate purchase: ${e instanceof Error?e.message:"Unknown error"}`)}finally{L(!1)}},[S,e,N,_]),$?h.A:f.A,(0,s.jsxs)("div",{className:N?"absolute top-4 right-4 z-20 pointer-events-auto":"absolute bottom-12 right-3 z-20 flex flex-col items-end space-y-1 pointer-events-auto",children:[(0,s.jsx)(n(),{href:`/profile/${r}`,onClick:e=>{e.stopPropagation()},className:`profile-link-area text-white cursor-pointer ${!N&&"video"===P?"mt-4":""} ${!N?"mb-1":""} ${N?"":"flex flex-col items-center"}`,"aria-label":`View profile for ${r}`,children:(0,s.jsxs)(d.eu,{className:"w-10 h-10 border-2 border-white",children:[(0,s.jsx)(d.BK,{src:i??"",alt:`${r}'s profile picture`}),(0,s.jsx)(d.q5,{children:r?.charAt(0).toUpperCase()??"U"})]})}),!N&&(0,s.jsxs)("button",{onClick:O,className:"flex flex-col items-center text-white group/like",children:[(0,s.jsxs)("div",{className:`w-10 h-10 bg-black/40 rounded-full flex items-center justify-center mb-1 transition-colors ${j?"bg-red-500/80":"group-hover/like:bg-white/20"}`,children:[(0,s.jsx)(u.Mbv,{size:24,className:`${j?"text-red-500":"text-white"} transition-transform group-hover/like:scale-110`})," "]}),(0,s.jsx)("span",{className:"text-xs font-semibold",children:U})]}),!N&&(0,s.jsxs)(n(),{href:"video"===P?`/video/${e}#comments`:`/image/${e}#comments`,className:"flex flex-col items-center text-white","aria-label":"View comments",onClick:e=>e.stopPropagation(),children:[(0,s.jsxs)("div",{className:"w-10 h-10 bg-black/40 rounded-full flex items-center justify-center mb-1",children:[(0,s.jsx)(u.hYw,{size:24})," "]}),(0,s.jsx)("span",{className:"text-xs font-semibold",children:g})]}),!N&&(0,s.jsxs)("button",{onClick:W,className:"flex flex-col items-center text-white group/share",children:[(0,s.jsxs)("div",{className:"w-10 h-10 bg-black/40 rounded-full flex items-center justify-center mb-1 transition-colors group-hover/share:bg-white/20",children:[(0,s.jsx)(u.Zzu,{size:22,className:"transition-transform group-hover/share:scale-110"})," "]}),(0,s.jsx)("span",{className:"text-xs font-semibold",children:w})]})]})}},55962:(e,t,r)=>{"use strict";r.d(t,{default:()=>o});var s=r(60687);function o({children:e}){return(0,s.jsx)("div",{className:"min-h-screen bg-background text-foreground antialiased",children:e})}},66464:(e,t,r)=>{"use strict";r.d(t,{N:()=>n});var s=r(94025);let o=process.env.NEXT_PUBLIC_SUPABASE_URL,i=process.env.NEXT_PUBLIC_SUPABASE_ANON_KEY;if(!o)throw Error("Supabase URL is missing. Make sure NEXT_PUBLIC_SUPABASE_URL is set in your environment variables.");if(!i)throw Error("Supabase Anon Key is missing. Make sure NEXT_PUBLIC_SUPABASE_ANON_KEY is set in your environment variables.");let n=(0,s.UU)(o,i,{auth:{autoRefreshToken:!0,persistSession:!0,detectSessionInUrl:!0}})},68735:(e,t,r)=>{Promise.resolve().then(r.t.bind(r,16444,23)),Promise.resolve().then(r.t.bind(r,16042,23)),Promise.resolve().then(r.t.bind(r,88170,23)),Promise.resolve().then(r.t.bind(r,49477,23)),Promise.resolve().then(r.t.bind(r,29345,23)),Promise.resolve().then(r.t.bind(r,12089,23)),Promise.resolve().then(r.t.bind(r,46577,23)),Promise.resolve().then(r.t.bind(r,31307,23))},80380:(e,t,r)=>{"use strict";r.d(t,{default:()=>s});let s=(0,r(12907).registerClientReference)(function(){throw Error("Attempted to call the default export of \"C:\\\\Users\\\\kevin\\\\Downloads\\\\Clone-https___www.tiktok.com_\\\\temp_unzip\\\\tiktok-clone\\\\src\\\\app\\\\ClientBody.tsx\" from the server, but it's on the client. It's not possible to invoke a client function from the server, it can only be rendered as a Component or passed to props of a Client Component.")},"C:\\Users\\kevin\\Downloads\\Clone-https___www.tiktok.com_\\temp_unzip\\tiktok-clone\\src\\app\\ClientBody.tsx","default")},89667:(e,t,r)=>{"use strict";r.d(t,{p:()=>n});var s=r(60687),o=r(43210),i=r(4780);let n=o.forwardRef(({className:e,type:t,...r},o)=>(0,s.jsx)("input",{type:t,className:(0,i.cn)("flex h-9 w-full rounded-md border border-input bg-transparent px-3 py-1 text-base shadow-sm transition-colors file:border-0 file:bg-transparent file:text-sm file:font-medium file:text-foreground placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-1 focus-visible:ring-ring disabled:cursor-not-allowed disabled:opacity-50 md:text-sm",e),ref:o,...r}));n.displayName="Input"},94431:(e,t,r)=>{"use strict";r.r(t),r.d(t,{default:()=>f,dynamic:()=>h,metadata:()=>u});var s=r(37413),o=r(22376),i=r.n(o),n=r(68726),a=r.n(n);r(35692);var l=r(6931),c=r(80380),d=r(13622);let u={title:"TikTok - Make Your Day",description:"TikTok - trends start here. On a device or on the web, viewers can watch and discover millions of personalized short videos.",icons:{icon:"/favicon.ico"}},h="force-dynamic";function f({children:e}){return(0,s.jsx)("html",{lang:"en",className:`${i().variable} ${a().variable}`,children:(0,s.jsxs)("body",{className:"min-h-screen bg-background antialiased",suppressHydrationWarning:!0,children:[(0,s.jsx)(d.default,{children:(0,s.jsx)(c.default,{children:e})}),(0,s.jsx)(l.Toaster,{position:"bottom-right"})]})})}},94815:(e,t,r)=>{Promise.resolve().then(r.bind(r,6931)),Promise.resolve().then(r.bind(r,80380)),Promise.resolve().then(r.bind(r,13622))}};